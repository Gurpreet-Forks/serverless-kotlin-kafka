== Serverless Kotlin Kafka

== ws-to-kafka

=== Dev (TestContainer Kafka):

[source,shell script]
----
./gradlew :ws-to-kafka:bootRun
----

.consume messaged with schema
[source,shell script]
----
docker exec -it schema-registry /usr/bin/kafka-json-schema-console-consumer --topic mytopic --bootstrap-server broker:9092
----


=== Prod (External Kafka):

[source,shell script]
----
export BOOTSTRAP_SERVERS=YOUR_BOOTSTRAP_SERVEERS
export CCLOUD_KEY=YOUR_CCLOUD_KEY
export CCLOUD_PASSWORD=YOUR_CCLOUD_PASSWORD
export SCHEMA_REGISTRY_URL=YOUR_CCLOUD_SCHEMA_REGISTRY_URL
export SCHEMA_REGISTRY_KEY=YOUR_SCHEMA_REGISTRY_USERNAME
export SCHEMA_REGISTRY_PASSWORD=YOUR_SCHEMA_REGISTRY_PASSWORD

./gradlew :ws-to-kafka:run
----


== web-ui

=== Dev (TestContainer Kafka):

[source,shell script]
----
./gradlew :web-ui:bootRun
----

.send a test message
[source,shell script]
----
docker exec -it kafka bash -c "echo \"foo:bar\" | kafka-console-producer --topic myTopic --broker-list localhost:9092 --property parse.key=true --property key.separator=:"
----


== todo

* schema stuff
** json schema used
* parse tags
* ksqldb stateful (total favorites)
* ksql transform (language groupings)
* web event consumer (websocket stream + pull query)
